{"version":3,"sources":["common/index.ts","common/redux.ts","common/components/SelectMode.tsx","common/components/Button.tsx","common/components/TextField.tsx","common/components/Message.tsx","common/helpers.ts","common/components/Grid.tsx","common/components/Winners.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["Color","Stage","Action","GAME_WINNERS_URL","newState","difficulties","currentMode","playerName","winners","score","stage","SETTING","createStore","state","action","type","SET_DIFFICULTIES","payload","SET_CURRENT_MODE","SET_PLAYER_NAME","SET_WINNERS","SET_SCORE","SET_STAGE","compose","applyMiddleware","thunk","window","__REDUX_DEVTOOLS_EXTENSION__","SelectMode","useSelector","dispatch","useDispatch","gameModes","push","Object","keys","className","value","onChange","event","target","disabled","map","key","Button","label","isDisabled","PLAYING","WIN","Error","onClick","TextField","placeholder","Message","colorClass","message","isStartGameMode","isAbsentPlayerName","player","computer","fetchWrapper","url","options","fetch","apply","arguments","then","res","ok","json","status","catch","err","console","error","Grid","props","scoreLocal","timerId","cell","isStarted","grid","coordinates","newGrid","size","Array","fill","el","DEFAULT","newCoordinates","array","row","col","timer","clearTimer","fillSelectedCell","RED","incrementComputerScore","winner","checkWinner","sendResultsAndDispatchThem","dispatchStageWin","selectRandomCell","BLUE","startTimer","dispatchScore","GREEN","incrementPlayerScore","store","delay","setTimeout","clearTimeout","length","from","to","randomIndex","Math","floor","random","splice","color","field","index","pow","date","Date","toLocaleString","getState","params","method","headers","body","JSON","stringify","newProps","this","rowIndex","style","height","width","border","colorIndex","backgroundColor","React","Component","connect","Winners","reverse","arr","App","useEffect","Boolean","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.88daf2ae.chunk.js","sourcesContent":["export const GAME_SETTINGS_URL = 'https://starnavi-frontend-test-task.herokuapp.com/game-settings';\nexport const GAME_WINNERS_URL = 'https://starnavi-frontend-test-task.herokuapp.com/winners';\n\nexport enum Color {\n  DEFAULT = 'transparent',\n  BLUE = '#42d8e8',\n  GREEN = '#00e871',\n  RED = '#e85a5e',\n};\n\nexport enum Stage {\n  SETTING,\n  PLAYING,\n  WIN\n};\n","import { createStore, applyMiddleware, Reducer, AnyAction, compose } from \"redux\";\nimport thunk from 'redux-thunk';\nimport * as T from \"./types\";\nimport { Stage } from './index'\n\n\n// Actions\nexport enum Action {\n  SET_DIFFICULTIES = 'SET_DIFFICULTIES',\n  SET_CURRENT_MODE = 'SET_CURRENT_MODE',\n  SET_PLAYER_NAME = 'SET_PLAYER_NAME',\n  SET_WINNERS = 'SET_WINNERS',\n  SET_SCORE = 'SET_SCORE',\n  SET_STAGE = 'SET_STAGE',\n};\n\n// Create default state\nfunction newState(): T.State {\n  return {\n    difficulties: null,\n    currentMode: null,\n    playerName: null,\n    winners: null,\n    score: [0, 0],\n    stage: Stage.SETTING,\n  };\n}\n\n// Reducer\nconst reducer: Reducer<T.State, AnyAction & { payload: any }> =\n  (state = newState(), action) => {\n\n    switch (action.type) {\n\n      case Action.SET_DIFFICULTIES:\n        return {\n          ...state,\n          difficulties: action.payload\n        };\n\n      case Action.SET_CURRENT_MODE:\n        return {\n          ...state,\n          currentMode: action.payload\n        };\n\n      case Action.SET_PLAYER_NAME:\n        return {\n          ...state,\n          playerName: action.payload\n        };\n\n      case Action.SET_WINNERS:\n        return {\n          ...state,\n          winners: action.payload\n        };\n\n      case Action.SET_SCORE:\n        return {\n          ...state,\n          score: action.payload\n        };\n\n      case Action.SET_STAGE:\n        return {\n          ...state,\n          stage: action.payload\n        };\n\n      default:\n        return state;\n    }\n  }\n\n\n// Store\nexport default createStore(\n  reducer,\n  compose(\n    applyMiddleware(thunk),\n    (window as any).__REDUX_DEVTOOLS_EXTENSION__ && (window as any).__REDUX_DEVTOOLS_EXTENSION__()\n  )\n);","import React from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { Action } from '../redux';\nimport * as T from \"../types\";\nimport { Stage } from '../index';\n\n\nconst START_GAME_MODE = 'Pick game mode';\n\n\nfunction SelectMode() {\n\n  const difficulties = useSelector<T.State, T.State['difficulties']>(state => state.difficulties);\n  const currentMode = useSelector<T.State, T.State['currentMode']>(state => state.currentMode);\n  const stage = useSelector<T.State, T.State['stage']>(state => state.stage);\n  const dispatch = useDispatch();\n\n  const gameModes = [START_GAME_MODE];\n  if(difficulties) {\n    gameModes.push(...Object.keys(difficulties));\n  }\n\n  function onChange(event: React.ChangeEvent<HTMLSelectElement>) {\n    const { value } = event.target;\n    dispatch({\n      type: Action.SET_CURRENT_MODE,\n      payload: value === START_GAME_MODE ? null : value,\n    });\n  }\n\n  return (\n    <select\n      className='select'\n      value={currentMode || START_GAME_MODE}\n      onChange={onChange}\n      disabled={stage !== Stage.SETTING}\n    >\n      {gameModes.map(key => (\n        <option key={key} value={key}>\n          {key}\n        </option>)\n      )}\n    </select>\n  );\n}\n\nexport default SelectMode;","import React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Action } from '../redux';\nimport * as T from \"../types\";\nimport { Stage } from '../index';\n\n\nfunction Button() {\n\n  const currentMode = useSelector<T.State, T.State['currentMode']>(state => state.currentMode);\n  const playerName = useSelector<T.State, T.State['playerName']>(state => state.playerName);\n  const stage = useSelector<T.State, T.State['stage']>(state => state.stage);\n  const dispatch = useDispatch();\n\n  function onClick(event: React.MouseEvent<HTMLButtonElement, MouseEvent>) {\n\n    switch (stage) {\n\n      case Stage.SETTING:\n        dispatch({\n          type: Action.SET_STAGE,\n          payload: Stage.PLAYING,\n        });\n        break;\n\n      case Stage.PLAYING:\n      case Stage.WIN:\n        dispatch({\n          type: Action.SET_CURRENT_MODE,\n          payload: null,\n        });\n        dispatch({\n          type: Action.SET_SCORE,\n          payload: [0, 0],\n        });\n        dispatch({\n          type: Action.SET_STAGE,\n          payload: Stage.SETTING,\n        });\n        break;\n\n      default:\n        throw new Error();\n    }\n\n  }\n\n  const isDisabled = !playerName || !currentMode;\n\n  let label;\n  switch (stage) {\n    case Stage.SETTING:\n      label = 'PLAY';\n      break;\n    case Stage.PLAYING:\n    case Stage.WIN:\n      label = 'PLAY AGAIN';\n      break;\n    default:\n      throw new Error();\n  }\n\n  return (\n    <button\n      className='button'\n      onClick={onClick}\n      disabled={isDisabled}\n    >\n      {label}\n    </button>\n  );\n}\n\nexport default Button;","import React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Action } from '../redux';\nimport * as T from \"../types\";\nimport { Stage } from '../index';\n\n\n\nfunction TextField() {\n\n  const playerName = useSelector<T.State, T.State['playerName']>(state => state.playerName);\n  const stage = useSelector<T.State, T.State['stage']>(state => state.stage);\n  const dispatch = useDispatch();\n  \n  function onChange(event: React.ChangeEvent<HTMLInputElement>) {\n    dispatch({\n      type: Action.SET_PLAYER_NAME,\n      payload: event.target.value\n    });\n  }\n\n  return (\n    <input\n      className='field'\n      type='text'\n      value={playerName || ''}\n      placeholder='Enter your name'\n      onChange={onChange}\n      disabled={stage !== Stage.SETTING}\n    />\n  );\n}\n\n\nexport default TextField;","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport * as T from \"../types\";\nimport { Stage } from '../index';\n\n\n\nfunction Message() {\n\n  const currentMode = useSelector<T.State, T.State['currentMode']>(state => state.currentMode);\n  const playerName = useSelector<T.State, T.State['playerName']>(state => state.playerName);\n  const stage = useSelector<T.State, T.State['stage']>(state => state.stage);\n  const score = useSelector<T.State, T.State['score']>(state => state.score);\n\n  let message = '';\n  let colorClass;\n  switch (stage) {\n\n    case Stage.SETTING: {\n      const isStartGameMode = !currentMode;\n      const isAbsentPlayerName = !playerName;\n\n      if (isStartGameMode) {\n        message += 'pick game mode'\n      }\n\n      if (isStartGameMode && isAbsentPlayerName) {\n        message += ' and ';\n      }\n\n      if (isAbsentPlayerName) {\n        message += 'enter your name'\n      }\n\n      if(!message) {\n        message += 'push PLAY button, and good luck :-)'\n      }\n\n      if (message) {\n        message = `Please, ${message}`\n      }\n\n      colorClass = ' message--setting';\n\n      break;\n    }\n\n    case Stage.PLAYING: {\n      const [player, computer] = score;\n      message = `Score: You ${player} : ${computer} \"computer\"`\n      break;\n    }\n\n    case Stage.WIN: {\n      const [player, computer] = score;\n      message = `Game over. \\nScore: ${player} : ${computer}. ${player > computer ? 'You are win!' : 'Computer win.'} \\nPlease, play again :-)`\n      break;\n    }\n\n    default:\n      throw new Error();\n  }\n\n  return message ? (\n    <p className={`message${colorClass ? colorClass : ''}`}>\n      {message}\n    </p>\n  ) : null;\n}\n\nexport default Message;","export const fetchWrapper: typeof fetch = function (url, options) {\n  return fetch.apply(null, arguments as unknown as Parameters<typeof fetch>)\n    .then(res => {\n      if (res.ok) return res.json()\n      else throw new Error(`Fetch error with status: ${res.status}`)\n    })\n    .catch(err => console.error(err));\n}\n\n// This JavaScript function always returns a random number\n// between min (included) and max (excluded)\n// https://www.w3schools.com/js/js_random.asp\nexport function getRandomBetween(from: number, to: number) {\n  return Math.floor(Math.random() * (to - from)) + from;\n}","import React from 'react';\nimport { AnyAction } from 'redux';\nimport { connect } from 'react-redux';\nimport { ThunkAction } from 'redux-thunk';\nimport { Action } from '../redux';\nimport * as T from \"../types\";\nimport { fetchWrapper, getRandomBetween } from '../helpers';\nimport { GAME_WINNERS_URL, Stage, Color } from '../index';\n\n\ntype Props = Readonly<{\n  store: T.State\n  dispatch: any\n}>\n\nclass Grid extends React.Component<Props> {\n\n  private scoreLocal: T.Score;\n  private timerId: number | null;\n  private cell: T.Coordinate | null;\n  private isStarted: boolean;\n  private grid: T.Grid;\n  private coordinates: Array<T.Coordinate>;\n\n  constructor(readonly props: Props) {\n\n    super(props);\n\n    const { difficulties, currentMode } = this.props.store;\n    const { field } = difficulties![currentMode!];\n\n    this.timerId = null;\n    this.cell = [0, 0];\n    this.scoreLocal = [0, 0];\n    this.isStarted = false;\n\n    this.grid = this.newGrid(field);\n    this.coordinates = this.newCoordinates(field);\n  }\n\n  shouldComponentUpdate(newProps: Props) {\n\n    const { difficulties, currentMode } = newProps.store;\n    const { field } = difficulties![currentMode!];\n\n    const isFieldsEquals =\n      field === this.props.store.difficulties![this.props.store.currentMode!].field;\n\n    // Если размеры сетки изменились, обновить сетку\n    if (!isFieldsEquals) {\n      this.grid = this.newGrid(field);\n      this.coordinates = this.newCoordinates(field);\n    }\n\n    // Первый запуск таймера\n    const { stage } = newProps.store;\n    if (!this.isStarted && stage === Stage.PLAYING) {\n      this.selectRandomCell();\n      this.fillSelectedCell(Color.BLUE);\n      this.startTimer();\n      this.isStarted = true;\n    }\n\n    // Всегда true\n    return true;\n  }\n\n  componentWillUnmount() {\n    this.clearTimer();\n  }\n\n  newGrid = (size: number) => {\n    return new Array(size)\n      .fill(null)\n      .map(el => new Array(size).fill(Color.DEFAULT)) as Array<Array<string>>;\n  }\n\n  newCoordinates = (size: number) => {\n    const array: Array<T.Coordinate> = [];\n    for (let row = 0; row < size; ++row) {\n      for (let col = 0; col < size; ++col) {\n        array.push([row, col]);\n      }\n    }\n    return array;\n  }\n\n  // Функция таймера\n  timer = () => {\n    // Фиксация текущих результатов\n    this.clearTimer();\n    this.fillSelectedCell(Color.RED);\n    this.incrementComputerScore(); // изменение локального игрового счёта\n\n    // Проверка, есть ли победитель?\n    const winner = this.checkWinner();\n    if (winner) {\n      this.sendResultsAndDispatchThem(winner);\n      this.dispatchStageWin();\n    } else {\n      this.selectRandomCell();\n      this.fillSelectedCell(Color.BLUE);\n      this.startTimer();\n      // this.forceUpdate();\n    }\n\n    // Отправка локального игрового счёта в redux\n    this.dispatchScore();\n  }\n\n  // Функция для обработки кликов\n  onClick = (event: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\n    // Фиксация текущих результатов\n    this.clearTimer();\n    this.fillSelectedCell(Color.GREEN);\n    this.incrementPlayerScore(); // изменение локального игрового счёта\n\n    // Проверка, есть ли победитель?\n    const winner = this.checkWinner();\n    if (winner) {\n      this.sendResultsAndDispatchThem(winner);\n      this.dispatchStageWin();\n    } else {\n      this.selectRandomCell();\n      this.fillSelectedCell(Color.BLUE);\n      this.startTimer();\n      // this.forceUpdate();\n    }\n\n    // Отправка локального игрового счёта в redux\n    this.dispatchScore();\n  }\n\n  startTimer = () => {\n    const { difficulties, currentMode } = this.props.store;\n    const { delay } = difficulties![currentMode!];\n    if (delay) {\n      if (typeof this.timerId === 'number') {\n        /*DEBUG*/console.error(new Error());\n        this.clearTimer();\n      }\n      this.timerId = window.setTimeout(this.timer, delay);\n    }\n  }\n\n  clearTimer = () => {\n    if (typeof this.timerId === 'number') {\n      window.clearTimeout(this.timerId);\n      this.timerId = null;\n      return;\n    }\n    /*DEBUG*///console.error(new Error());\n  }\n\n  selectRandomCell = () => {\n    // Если ячейки закончились, то будет null\n    if (!this.coordinates.length) {\n      this.cell = null;\n    }\n\n    // Выбор случайной ячейки\n    const randomIndex = getRandomBetween(0, this.coordinates.length);\n    this.cell = this.coordinates[randomIndex];\n\n    // Удаление выбранной ячейки\n    this.coordinates.splice(randomIndex, 1);\n  }\n\n  fillSelectedCell = (color: Color) => {\n    // Если ячейки закончились, то будет null\n    if (this.cell) {\n      const [row, col] = this.cell;\n      this.grid[row][col] = color;\n    }\n  }\n\n  incrementPlayerScore = () => {\n    ++this.scoreLocal[0]; // player +1\n  }\n\n  incrementComputerScore = () => {\n    ++this.scoreLocal[1]; // computer +1\n  }\n\n  dispatchScore = () => {\n    this.props.dispatch({\n      type: Action.SET_SCORE,\n      payload: [...this.scoreLocal],\n    })\n  }\n\n  // Если победитель есть, то вернуть его объект, в противном случае вернуть null\n  checkWinner = () => {\n\n    const { difficulties, currentMode, playerName, stage } = this.props.store;\n    const { field } = difficulties![currentMode!];\n\n    if (stage === Stage.WIN) return null;\n\n    const { scoreLocal } = this;\n    for (let index = 0, length = scoreLocal.length; index < length; ++index) {\n      const resultAbsolute = scoreLocal[index];\n      const resultRelative = resultAbsolute / Math.pow(field, 2) * 100;\n\n      if (resultRelative > 50) {\n\n        const winner = { date: new Date().toLocaleString() } as T.Winner;\n        switch (index) {\n          case 0:\n            winner.winner = playerName || '';\n            break\n          case 1:\n            winner.winner = 'computer';\n            break;\n          default:\n            throw new Error();\n        }\n\n        return winner;\n      }\n    }\n\n    return null;\n  }\n\n  sendResultsAndDispatchThem = (winner: T.Winner) => {\n\n    // Отправка данных на сервер и обновление рейтинга победителей\n    type AsyncAction = ThunkAction<void, T.State, undefined, AnyAction>;\n    const asyncAction: AsyncAction = (dispatch, getState) => {\n\n      const params = {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json;charset=utf-8'\n        },\n        body: JSON.stringify(winner),\n      };\n\n      fetchWrapper(GAME_WINNERS_URL, params)\n        .then(res => dispatch({\n          type: Action.SET_WINNERS,\n          payload: res\n        }));\n    }\n\n    this.props.dispatch(asyncAction);\n  }\n\n  dispatchStageWin = () => {\n    this.props.dispatch({\n      type: Action.SET_STAGE,\n      payload: Stage.WIN,\n    });\n  }\n\n  render() {\n    const { difficulties, currentMode } = this.props.store;\n    const { field } = difficulties![currentMode!];\n    const size = `${100 / field}%`;\n\n    // Рендер\n    return (\n      <div className='grid'>\n        {this.grid.map((row, rowIndex) => (\n          <div\n            key={rowIndex}\n            className='container'\n            style={{\n              height: size,\n              width: '100%',\n              border: 'solid whitesmoke 1px'\n            }}\n          >\n            {row.map((color, colorIndex) => (\n              <div\n                key={colorIndex}\n                onClick={color === Color.BLUE ? this.onClick : null!}\n                style={{\n                  height: '100%',\n                  width: size,\n                  backgroundColor: color,\n                  border: 'solid whitesmoke 1px'\n                }}\n              />\n            ))}\n          </div>\n        ))}\n      </div>\n    );\n  }\n}\n\nexport default connect(\n  state => ({ store: state }),\n  dispatch => ({ dispatch }),\n)(Grid as any);","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport * as T from \"../types\";\n\n\n\nfunction Winners() {\n\n  const winners = useSelector<T.State, T.State['winners']>(state => state.winners);\n\n  return (\n    <div className='container winners'>\n      <h3>Leader Board</h3>\n      {winners && (\n        <ul className='stretch'>\n          {[...winners].reverse().map(({ winner, date }, index, arr) => (\n            <li key={index} className='container'>\n              <span>{winner}</span>\n              <span>{date}</span>\n            </li>\n          ))}\n        </ul>\n      )}\n    </div>\n  );\n}\n\nexport default Winners;","import React, { useEffect } from 'react';\nimport { AnyAction } from 'redux';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { ThunkAction } from 'redux-thunk';\nimport { Action } from './common/redux';\nimport SelectMode from \"./common/components/SelectMode\";\nimport Button from './common/components/Button';\nimport TextField from './common/components/TextField';\nimport Message from './common/components/Message';\nimport Grid from './common/components/Grid';\nimport Winners from './common/components/Winners'\nimport { fetchWrapper } from './common/helpers';\nimport * as T from './common/types';\nimport { GAME_SETTINGS_URL, GAME_WINNERS_URL } from './common';\n\n\n\nfunction App() {\n\n  const difficulties = useSelector<T.State, T.State['difficulties']>(state => state.difficulties);\n  const currentMode = useSelector<T.State, T.State['currentMode']>(state => state.currentMode);\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n\n    type AsyncAction = ThunkAction<void, T.State, undefined, AnyAction>;\n    const asyncAction: AsyncAction = (dispatch, getState) => {\n\n      fetchWrapper(GAME_SETTINGS_URL)\n        .then(res => dispatch({\n          type: Action.SET_DIFFICULTIES,\n          payload: res,\n        }));\n\n      fetchWrapper(GAME_WINNERS_URL)\n        .then(res => dispatch({\n          type: Action.SET_WINNERS,\n          payload: res,\n        }));\n    }\n\n    dispatch(asyncAction);\n  }, []);\n\n  return (\n    <>\n      <div className='container game'>\n        <div className='container controls'>\n          <SelectMode />\n          <TextField />\n          <Button />\n        </div>\n        <Message />\n        {difficulties && currentMode && <Grid />}\n      </div>\n      <div className='container results'>\n        <Winners />\n      </div>\n    </>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport { Provider } from 'react-redux'\nimport store from './common/redux';\nimport 'normalize.css';\nimport './index.scss';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App/>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}